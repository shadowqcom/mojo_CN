# å‚æ•°åŒ–ï¼šç¼–è¯‘æ—¶å…ƒç¼–ç¨‹
è®¸å¤šç¼–ç¨‹è¯­è¨€éƒ½å…·å¤‡è¿›è¡Œå…ƒç¼–ç¨‹çš„èƒ½åŠ›ï¼Œå³ç¼–å†™èƒ½å¤Ÿç”Ÿæˆæˆ–ä¿®æ”¹ä»£ç çš„ä»£ç ã€‚Pythonå…·å¤‡åŠ¨æ€å…ƒç¼–ç¨‹çš„åŠŸèƒ½ï¼Œå¦‚è£…é¥°å™¨ã€å…ƒç±»ç­‰ç­‰ã€‚è¿™äº›åŠŸèƒ½ä½¿å¾—Pythonéå¸¸çµæ´»å’Œé«˜æ•ˆï¼Œä½†ç”±äºå®ƒä»¬æ˜¯åŠ¨æ€çš„ï¼Œæ‰€ä»¥ä¼šå¸¦æ¥è¿è¡Œæ—¶çš„å¼€é”€ã€‚å…¶ä»–ç¼–ç¨‹è¯­è¨€åˆ™å…·å¤‡é™æ€æˆ–ç¼–è¯‘æ—¶çš„å…ƒç¼–ç¨‹åŠŸèƒ½ï¼Œå¦‚Cé¢„å¤„ç†å™¨å®å’ŒC++æ¨¡æ¿ã€‚ç„¶è€Œï¼Œè¿™äº›åŠŸèƒ½ä½¿ç”¨èµ·æ¥å¯èƒ½å—åˆ°é™åˆ¶å¹¶ä¸”éš¾ä»¥ä½¿ç”¨ã€‚

ä¸ºäº†æ”¯æŒMojoåœ¨äººå·¥æ™ºèƒ½é¢†åŸŸçš„å·¥ä½œï¼Œæˆ‘ä»¬æ—¨åœ¨æä¾›åŠŸèƒ½å¼ºå¤§ã€æ˜“äºä½¿ç”¨ä¸”æ²¡æœ‰è¿è¡Œæ—¶å¼€é”€çš„ç¼–è¯‘æ—¶å…ƒç¼–ç¨‹ã€‚è¿™ç§ç¼–è¯‘æ—¶å…ƒç¼–ç¨‹ä½¿ç”¨ä¸è¿è¡Œæ—¶ç¨‹åºç›¸åŒçš„è¯­è¨€ï¼Œå› æ­¤æ‚¨æ— éœ€å­¦ä¹ ä¸€é—¨æ–°çš„è¯­è¨€ï¼Œåªéœ€äº†è§£ä¸€äº›æ–°ç‰¹æ€§ã€‚

ä¸»è¦çš„æ–°ç‰¹æ€§æ˜¯â€œå‚æ•°â€ã€‚æ‚¨å¯ä»¥å°†å‚æ•°è§†ä¸ºåœ¨ç¼–è¯‘æ—¶å˜é‡ï¼Œå®ƒåœ¨è¿è¡Œæ—¶å˜ä¸ºå¸¸é‡ã€‚è¿™ç§ä½¿ç”¨â€œå‚æ•°â€çš„æ–¹å¼å¯èƒ½ä¸æ‚¨åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ä¹ æƒ¯çš„æ–¹å¼ä¸åŒï¼Œå…¶ä»–ç¼–ç¨‹è¯­è¨€ç»å¸¸å°†â€œå‚æ•°â€å’Œâ€œå‚æ•°è¡¨è¾¾å¼â€è§†ä¸ºå¯ä»¥äº’æ¢ä½¿ç”¨çš„ã€‚åœ¨Mojoä¸­ï¼Œâ€œå‚æ•°â€å’Œâ€œå‚æ•°è¡¨è¾¾å¼â€æŒ‡çš„æ˜¯ç¼–è¯‘æ—¶çš„å€¼ï¼Œâ€œå‚æ•°â€å’Œâ€œè¡¨è¾¾å¼â€æŒ‡çš„æ˜¯è¿è¡Œæ—¶çš„å€¼ã€‚

åœ¨Mojoä¸­ï¼Œæ‚¨å¯ä»¥å‘ç»“æ„ä½“æˆ–å‡½æ•°æ·»åŠ å‚æ•°ã€‚æ‚¨è¿˜å¯ä»¥å®šä¹‰å‘½åå‚æ•°è¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯åˆ«åï¼Œæ‚¨å¯ä»¥å°†å…¶ç”¨ä½œè¿è¡Œæ—¶å¸¸é‡ã€‚

## å‚æ•°åŒ–

è¦å®šä¹‰å‚æ•°åŒ–å‡½æ•°ï¼Œè¯·åœ¨å‚æ•°åˆ—è¡¨å‰é¢çš„æ–¹æ‹¬å·ä¸­æ·»åŠ å‚æ•°ã€‚æ¯ä¸ªå‚æ•°çš„æ ¼å¼å°±åƒå‚æ•°ä¸€æ ·ï¼šå‚æ•°åç§°ï¼Œåè·Ÿå†’å·å’Œç±»å‹ï¼ˆè¿™æ˜¯å¿…éœ€çš„ï¼‰ã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œè¯¥å‡½æ•°æœ‰ä¸€ä¸ªcountç±»å‹ä¸º çš„å‚æ•°Intã€‚

```mojo
fn repeat[count: Int](msg: String):
    @unroll
    for i in range(count):
        print(msg)
```

ï¼ˆæ­¤å¤„æ˜¾ç¤ºçš„`@unroll`æŒ‡ä»¤åœ¨ç¼–è¯‘æ—¶å±•å¼€å¾ªç¯ã€‚è¯¥æŒ‡ä»¤ä»…åœ¨å¾ªç¯é™åˆ¶ä¸ºç¼–è¯‘æ—¶å¸¸é‡æ—¶èµ·ä½œç”¨ã€‚ï¼‰

è°ƒç”¨å‚æ•°åŒ–å‡½æ•°æ—¶ï¼Œæ‚¨éœ€è¦åƒå‡½æ•°å‚æ•°ä¸€æ ·ä¸ºå‚æ•°æä¾›å€¼ï¼š

```mojo
repeat[3]("Hello")
```

    Hello
    Hello
    Hello
    

ç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æœŸé—´è§£æå‚æ•°å€¼ï¼Œå¹¶ä¸ºæ¯ä¸ªå”¯ä¸€çš„å‚æ•°å€¼åˆ›å»º`repeat[]()`å‡½æ•°çš„å…·ä½“ç‰ˆæœ¬ã€‚åœ¨è§£æå‚æ•°å€¼å¹¶å±•å¼€å¾ªç¯ä¹‹åï¼Œ`repeat[3]()`å‡½æ•°å¤§è‡´ç­‰åŒäºä»¥ä¸‹ä»£ç ï¼š

```mojo
fn repeat_3(msg: String):
    print(msg)
    print(msg)
    print(msg)
```

è¿™å¹¶ä¸ä»£è¡¨ç¼–è¯‘å™¨ç”Ÿæˆçš„å®é™…ä»£ç ã€‚åœ¨è§£æå‚æ•°ä¹‹æ—¶ï¼ŒMojoä»£ç å·²ç»è¢«è½¬æ¢ä¸ºMLIRçš„ä¸­é—´è¡¨ç¤ºå½¢å¼ã€‚

å¦‚æœç¼–è¯‘å™¨æ— æ³•å°†æ‰€æœ‰å‚æ•°å€¼è§£æä¸ºå¸¸é‡å€¼ï¼Œåˆ™ç¼–è¯‘å¤±è´¥ã€‚

## å‚æ•°åŒ–ç»“æ„ä½“

æ‚¨è¿˜å¯ä»¥å‘ç»“æ„ä½“æ·»åŠ å‚æ•°ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å‚æ•°åŒ–ç»“æ„ä½“æ¥æ„å»ºé€šç”¨å®¹å™¨ã€‚ä¾‹å¦‚ï¼Œé€šç”¨æ•°ç»„ç±»å‹å¯èƒ½åŒ…å«ä»¥ä¸‹ä»£ç ï¼š

```mojo
struct GenericArray[T: AnyRegType]:
    var data: Pointer[T]
    var size: Int

    fn __init__(inout self, *elements: T):
        self.size = len(elements)
        self.data = Pointer[T].alloc(self.size)
        for i in range(self.size):
            self.data[i] = elements[i]

    fn __del__(owned self):
        self.data.free()

    fn __getitem__(self, i: Int) raises -> T:
        if (i < self.size):
            return self.data[i]
        else:
            raise Error("Out of bounds")
```

è¯¥ç»“æ„ä½“æœ‰ä¸€ä¸ªåä¸º`T`çš„å‚æ•°ï¼Œå®ƒæ˜¯æ‚¨æƒ³è¦å­˜å‚¨åœ¨æ•°ç»„ä¸­çš„æ•°æ®ç±»å‹çš„å ä½ç¬¦ï¼Œæœ‰æ—¶ç§°ä¸ºâ€œç±»å‹å‚æ•°â€ã€‚`T`è¢«å®šä¹‰ä¸º`AnyRegType`ç±»å‹ï¼Œå®ƒæ˜¯è¡¨ç¤ºä»»ä½•å¯å¯„å­˜å¯„å­˜å™¨çš„ç±»å‹çš„å…ƒç±»å‹ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬çš„`GenericArray`å¯ä»¥å­˜å‚¨å›ºå®šå¤§å°çš„æ•°æ®ç±»å‹ï¼Œå¦‚æ•´æ•°å’Œæµ®ç‚¹æ•°ï¼Œè¿™äº›å¯ä»¥åœ¨æœºå™¨å¯„å­˜å™¨ä¸­ä¼ é€’ï¼Œä½†ä¸èƒ½å­˜å‚¨å­—ç¬¦ä¸²æˆ–å‘é‡ç­‰åŠ¨æ€åˆ†é…çš„æ•°æ®ã€‚

åœ¨å‚æ•°çš„å‘½åä¸­ï¼Œä½¿ç”¨å¤§å†™çš„`T`å¹¶æ²¡æœ‰ç‰¹æ®Šæ„ä¹‰ï¼Œä½†åœ¨è®¸å¤šç¼–ç¨‹è¯­è¨€ä¸­ï¼Œä¸ºç±»å‹å‚æ•°é€‰æ‹©ä¸€ä¸ªç®€çŸ­çš„åç§°æ˜¯ä¸€ç§æƒ¯ä¾‹ï¼Œé€šå¸¸é»˜è®¤ä¸º`T`ï¼ˆè¡¨ç¤ºâ€œç±»å‹â€ï¼‰ã€‚

ä¸å‚æ•°åŒ–å‡½æ•°ä¸€æ ·ï¼Œå½“ä½¿ç”¨å‚æ•°åŒ–ç»“æ„ä½“æ—¶ï¼Œæ‚¨éœ€è¦ä¼ é€’å‚æ•°å€¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“æ‚¨åˆ›å»º`GenericArray`çš„å®ä¾‹æ—¶ï¼Œæ‚¨éœ€è¦æŒ‡å®šè¦å­˜å‚¨çš„ç±»å‹ï¼Œä¾‹å¦‚`Int`æˆ–`Float64`ã€‚ï¼ˆè¿™å¯èƒ½æœ‰ç‚¹ä»¤äººå›°æƒ‘ï¼Œå› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨ä¼ é€’çš„â€œå‚æ•°å€¼â€å®é™…ä¸Šæ˜¯ä¸€ä¸ªâ€œç±»å‹â€ã€‚è¿™æ²¡å…³ç³»ï¼šMojoç±»å‹æ˜¯æœ‰æ•ˆçš„ç¼–è¯‘æ—¶å€¼ã€‚ï¼‰

æ‚¨ä¼šå‘ç°`T`åœ¨ç»“æ„ä½“ä¸­è¢«ç”¨äºé€šå¸¸ç”¨äºç±»å‹åç§°çš„åœ°æ–¹ã€‚ä¾‹å¦‚ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­ä½œä¸º`elements`çš„å½¢å¼ç±»å‹ä»¥åŠ`__getitem__()`æ–¹æ³•çš„è¿”å›ç±»å‹ã€‚

ç›®å‰ï¼Œæ­¤ä»£ç ä»…é€‚ç”¨äºå¯å¯„å­˜å™¨ä¼ é€’çš„ç±»å‹ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆç±»å‹å‚æ•°`T`é™å®šä¸º`AnyRegType`çš„åŸå› ã€‚è¿˜æœ‰ä¸€ä¸ªåŒ…å«**æ‰€æœ‰**Mojoç±»å‹çš„å…ƒç±»å‹ï¼Œå³`AnyType`ã€‚

ä»¥ä¸‹æ˜¯ä½¿ç”¨`GenericArray`çš„ç¤ºä¾‹ï¼š

```mojo
var array = GenericArrayInt
for i in range(array.size):
    print(array[i], sep=" ", end="")
```

    1  2  3  4  

å‚æ•°åŒ–ç»“æ„ä½“å¯ä»¥ä½¿ç”¨`Self`ç±»å‹æ¥è¡¨ç¤ºç»“æ„ä½“çš„å…·ä½“å®ä¾‹ï¼ˆå³ï¼Œæ‰€æœ‰å‚æ•°éƒ½å·²æŒ‡å®šï¼‰ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å‘`GenericArray`æ·»åŠ ä¸€ä¸ªé™æ€å·¥å‚æ–¹æ³•ï¼Œå…·æœ‰ä»¥ä¸‹ç­¾åï¼š

```mojo
struct GenericArray[T: AnyRegType]:
    ...

    @staticmethod
    fn splat(count: Int, value: T) -> Self:
        # åˆ›å»ºä¸€ä¸ªå…·æœ‰ç»™å®šå€¼çš„æ–°æ•°ç»„ï¼Œå…¶å…ƒç´ ä¸ªæ•°ä¸ºcount
```

åœ¨è¿™é‡Œï¼Œ`Self`ç­‰ä»·äº`GenericArray[T]`ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥è¿™æ ·è°ƒç”¨`splat()`æ–¹æ³•ï¼š

```mojo
GenericArray[Float64].splat(8, 0)
```

è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª`GenericArray[Float64]`çš„å®ä¾‹ã€‚

### æ¡ˆä¾‹ç ”ç©¶ï¼šSIMDç±»å‹

è®©æˆ‘ä»¬ä»¥Mojoæ ‡å‡†åº“ä¸­çš„`SIMD`ç±»å‹ä½œä¸ºä¸€ä¸ªçœŸå®ä¸–ç•Œçš„ä¾‹å­æ¥çœ‹çœ‹å‚æ•°åŒ–ç±»å‹ã€‚

å•æŒ‡ä»¤å¤šæ•°æ®ï¼ˆSIMDï¼‰æ˜¯ä¸€ç§å¹¶è¡Œå¤„ç†æŠ€æœ¯ï¼Œå†…ç½®äºè®¸å¤šç°ä»£CPUã€GPUå’Œå®šåˆ¶åŠ é€Ÿå™¨ä¸­ã€‚SIMDå…è®¸æ‚¨ä¸€æ¬¡å¯¹å¤šä¸ªæ•°æ®æ‰§è¡Œå•ä¸ªæ“ä½œã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ±‚å¹³æ–¹æ ¹ï¼Œå¯ä»¥ä½¿ç”¨SIMDæ¥å¹¶è¡ŒåŒ–å·¥ä½œã€‚

å¤„ç†å™¨ä½¿ç”¨ç¡¬ä»¶ä¸­çš„ä½çº§çŸ¢é‡å¯„å­˜å™¨å®ç°SIMDï¼Œè¯¥å¯„å­˜å™¨åŒ…å«å¤šä¸ªæ ‡é‡æ•°æ®ç±»å‹çš„å®ä¾‹ã€‚ä¸ºäº†åœ¨è¿™äº›å¤„ç†å™¨ä¸Šä½¿ç”¨SIMDæŒ‡ä»¤ï¼Œæ•°æ®å¿…é¡»è¢«å½¢çŠ¶åŒ–ä¸ºæ­£ç¡®çš„SIMDå®½åº¦ï¼ˆæ•°æ®ç±»å‹ï¼‰å’Œé•¿åº¦ï¼ˆå‘é‡å¤§å°ï¼‰ã€‚å¤„ç†å™¨å¯ä»¥æ”¯æŒ512ä½æˆ–æ›´é•¿çš„SIMDå‘é‡ï¼Œå¹¶æ”¯æŒä»8ä½æ•´æ•°åˆ°64ä½æµ®ç‚¹æ•°çš„å¤šç§æ•°æ®ç±»å‹ï¼Œå› æ­¤å®šä¹‰æ‰€æœ‰å¯èƒ½çš„SIMDå˜ä½“æ˜¯ä¸å®é™…çš„ã€‚

Mojoçš„`SIMD`ç±»å‹ï¼ˆå®šä¹‰ä¸ºç»“æ„ä½“ï¼‰é€šè¿‡å…¶æ–¹æ³•å…¬å¼€äº†å¸¸è§çš„SIMDæ“ä½œï¼Œå¹¶ä½¿SIMDæ•°æ®ç±»å‹å’Œå¤§å°å€¼æˆä¸ºå‚æ•°åŒ–ã€‚è¿™æ ·ï¼Œæ‚¨å¯ä»¥ç›´æ¥å°†æ•°æ®æ˜ å°„åˆ°ä»»ä½•ç¡¬ä»¶ä¸Šçš„SIMDå‘é‡ã€‚

è¿™æ˜¯Mojoçš„`SIMD`ç±»å‹å®šä¹‰çš„ç®€åŒ–ï¼ˆéåŠŸèƒ½æ€§ï¼‰ç‰ˆæœ¬ï¼š

```mojo
struct SIMD[type: DType, size: Int]:
    var value: Ã¢â‚¬Â¦ # è¿™é‡Œæœ‰ä¸€äº›åº•å±‚çš„MLIRå†…å®¹

    # ä»ä¸€äº›æ ‡é‡åˆ›å»ºæ–°çš„SIMD
    fn __init__(inout self, *elems: SIMD[type, 1]): ...

    # ç”¨é‡å¤çš„æ ‡é‡å€¼å¡«å……SIMD
    @staticmethod
    fn splat(x: SIMD[type, 1]) -> SIMD[type, size]: ...

    # å°†SIMDçš„å…ƒç´ è½¬æ¢ä¸ºä¸åŒçš„å…ƒç´ ç±»å‹
    fn casttarget: DType -> SIMD[target, size]: ...

    # æ”¯æŒè®¸å¤šæ ‡å‡†æ“ä½œç¬¦
    fn __add__(self, rhs: Self) -> Self: ...
```

å› æ­¤ï¼Œæ‚¨å¯ä»¥åƒè¿™æ ·åˆ›å»ºå’Œä½¿ç”¨SIMDå‘é‡ï¼š

```mojo
var vector = SIMD[DType.int16, 4](1, 2, 3, 4)
vector = vector * vector
for i in range(4):
    print(vector[i], sep=" ", end="")
```
```
 1  4  9  16
```

æ­£å¦‚æ‚¨æ‰€è§ï¼Œä¸€ä¸ªç®€å•çš„ç®—æœ¯è¿ç®—ç¬¦`*`åº”ç”¨äºä¸€å¯¹SIMDå‘é‡çš„å¯¹åº”å…ƒç´ ã€‚

ä½¿ç”¨å‚æ•°å®šä¹‰æ¯ä¸ªSIMDå˜ä½“éå¸¸é€‚åˆä»£ç é‡ç”¨ï¼Œå› ä¸º`SIMD`ç±»å‹å¯ä»¥é™æ€åœ°è¡¨ç¤ºæ‰€æœ‰ä¸åŒçš„å‘é‡å˜ä½“ï¼Œè€Œä¸éœ€è¦è¯­è¨€é¢„å®šä¹‰æ¯ä¸ªå˜ä½“ã€‚

å› ä¸º`SIMD`æ˜¯ä¸€ä¸ªå‚æ•°åŒ–ç±»å‹ï¼Œæ‰€ä»¥å…¶å‡½æ•°ä¸­çš„`self`å‚æ•°æºå¸¦è¿™äº›å‚æ•°ã€‚å®Œæ•´çš„ç±»å‹åç§°æ˜¯`SIMD[type, size]`ã€‚å°½ç®¡å¯ä»¥å°†å…¶å†™å‡ºæ¥ï¼ˆå¦‚`splat()`çš„è¿”å›ç±»å‹æ‰€ç¤ºï¼‰ï¼Œä½†è¿™å¯èƒ½å¾ˆå†—é•¿ï¼Œæ‰€ä»¥å»ºè®®ä½¿ç”¨`Self`ç±»å‹ï¼ˆæ¥è‡ªPEP673ï¼‰ï¼Œå°±åƒ`__add__`ç¤ºä¾‹ä¸­æ‰€åšçš„é‚£æ ·ã€‚

## åŸºäºå‚æ•°çš„é‡è½½

å‡½æ•°å’Œæ–¹æ³•å¯ä»¥æ ¹æ®å…¶å‚æ•°ç­¾åè¿›è¡Œé‡è½½ã€‚é‡è½½è§£æé€»è¾‘æŒ‰ç…§ä»¥ä¸‹è§„åˆ™è¿›è¡Œå€™é€‰é¡¹ç­›é€‰ï¼ŒæŒ‰ä¼˜å…ˆé¡ºåºï¼š

1) å…·æœ‰æœ€å°‘çš„éšå¼è½¬æ¢ï¼ˆå‚æ•°å’Œå‚æ•°ä¹‹é—´ï¼‰çš„å€™é€‰é¡¹ã€‚
2) æ²¡æœ‰å¯å˜å‚æ•°çš„å€™é€‰é¡¹ã€‚
3) æ²¡æœ‰å¯å˜å‚æ•°çš„å€™é€‰é¡¹ã€‚
4) å‚æ•°ç­¾åæœ€çŸ­çš„å€™é€‰é¡¹ã€‚
5) é`@staticmethod`çš„å€™é€‰é¡¹ï¼ˆæ¥ä¸Šï¼‰

å¦‚æœåœ¨åº”ç”¨è¿™äº›è§„åˆ™åå­˜åœ¨å¤šä¸ªå€™é€‰é¡¹ï¼Œåˆ™é‡è½½è§£æå°†å¤±è´¥ã€‚ä¾‹å¦‚ï¼š

```mojo
@register_passable("trivial")
struct MyInt:
    """ä¸€ç§éšå¼å¯è½¬æ¢ä¸º`Int`çš„ç±»å‹ã€‚"""
    var value: Int

    @always_inline("nodebug")
    fn __init__(_a: Int) -> Self:
        return Self {value: _a}

fn foo[x: MyInt, a: Int]():
    print("foo[x: MyInt, a: Int]()")

fn foo[x: MyInt, y: MyInt]():
    print("foo[x: MyInt, y: MyInt]()")

fn bara: Int:
    print("bara: Int")

fn bara: Int:
    print("bara: Int")

fn bar*a: Int:
    print("bar*a: Int")

fn parameter_overloads[a: Int, b: Int, x: MyInt]():
    # è°ƒç”¨`foo[x: MyInt, a: Int]()`ï¼Œå› ä¸ºå®ƒä¸éœ€è¦éšå¼è½¬æ¢ï¼Œè€Œ`foo[x: MyInt, y: MyInt]()`éœ€è¦ä¸€ä¸ªã€‚
    foo[x, a]()

    # è°ƒç”¨`bara: Int`ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å¯å˜å‚æ•°ã€‚
    bara

    # è°ƒç”¨`bar*a: Int`ï¼Œå› ä¸ºå®ƒæœ‰å¯å˜å‚æ•°ã€‚
    bara, a, a

parameter_overloads[1, 2, MyInt(3)]()

struct MyStruct:
    fn __init__(inout self):
        pass

    fn foo(inout self):
        print("è°ƒç”¨å®ä¾‹æ–¹æ³•")

    @staticmethod
    fn foo():
        print("è°ƒç”¨é™æ€æ–¹æ³•")

fn test_static_overload():
    var a = MyStruct()
    # `foo(inout self)`ä¼˜å…ˆäºé™æ€æ–¹æ³•ã€‚
    a.foo()
```
```mojo
foo[x: MyInt, a: Int]() bar[a: Int](b: Int) bar[*a: Int](b: Int)
```


## ä½¿ç”¨å‚æ•°åŒ–ç±»å‹å’Œå‡½æ•°

é€šè¿‡åœ¨æ–¹æ‹¬å·ä¸­ä¼ é€’å‚æ•°å€¼ï¼Œæ‚¨å¯ä»¥å®ä¾‹åŒ–å‚æ•°åŒ–ç±»å‹å’Œå‡½æ•°ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸Šé¢çš„`SIMD`ç±»å‹ï¼Œ`type`æŒ‡å®šæ•°æ®ç±»å‹ï¼Œ`size`æŒ‡å®šSIMDå‘é‡çš„é•¿åº¦ï¼ˆå®ƒå¿…é¡»æ˜¯2çš„å¹‚æ¬¡æ–¹ï¼‰ï¼š

```mojo
# åˆ›å»ºä¸€ä¸ªåŒ…å«4ä¸ªfloatçš„å‘é‡ã€‚
var small_vec = SIMDDType.float32, 4

# åˆ›å»ºä¸€ä¸ªåŒ…å«1.0çš„float16æ ¼å¼çš„å¤§å‘é‡ã€‚
var big_vec = SIMD[DType.float16, 32].splat(1.0)

# è¿›è¡Œä¸€äº›æ•°å­¦è¿ç®—å¹¶å°†å…ƒç´ è½¬æ¢ä¸ºfloat32ã€‚
var bigger_vec = (big_vec+big_vec).cast[DType.float32]()

# å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥æ˜¾å¼åœ°å†™å‡ºç±»å‹ã€‚
var bigger_vec2 : SIMD[DType.float32, 32] = bigger_vec

print('small_vec ç±»å‹:', small_vec.element_type, 'é•¿åº¦:', len(small_vec))
print('bigger_vec2 ç±»å‹:', bigger_vec2.element_type, 'é•¿åº¦:', len(bigger_vec2))
```

æ³¨æ„ï¼Œ`cast()`æ–¹æ³•ä¹Ÿéœ€è¦ä¸€ä¸ªå‚æ•°æ¥æŒ‡å®šæ‰€éœ€çš„è½¬æ¢ç±»å‹ï¼ˆä¸Šé¢çš„æ–¹æ³•å®šä¹‰æœŸæœ›ä¸€ä¸ª`target`å‚æ•°åŒ–å€¼ï¼‰ã€‚å› æ­¤ï¼Œæ­£å¦‚`SIMD`ç»“æ„æ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹å®šä¹‰ä¸€æ ·ï¼Œ`cast()`æ–¹æ³•æ˜¯ä¸€ä¸ªæ³›å‹æ–¹æ³•å®šä¹‰ï¼Œå®ƒåœ¨ç¼–è¯‘æ—¶æ ¹æ®å‚æ•°å€¼è¿›è¡Œå®ä¾‹åŒ–ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶ã€‚

ä¸Šé¢çš„ä»£ç å±•ç¤ºäº†ä½¿ç”¨å…·ä½“ç±»å‹ï¼ˆå³ä½¿ç”¨å·²çŸ¥ç±»å‹å€¼å®ä¾‹åŒ–`SIMD`ï¼‰çš„ç¤ºä¾‹ï¼Œä½†æ˜¯å‚æ•°çš„ä¸»è¦å¼ºå¤§ä¹‹å¤„æ¥è‡ªäºèƒ½å¤Ÿå®šä¹‰ä½¿ç”¨å‚æ•°å€¼çš„å‚æ•°åŒ–ç®—æ³•å’Œç±»å‹çš„èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯å¦‚ä½•ä½¿ç”¨`SIMD`å®šä¹‰ä¸€ä¸ªç±»å‹å’Œå®½åº¦æ— å…³çš„å‚æ•°åŒ–ç®—æ³•ï¼š

```mojo
from math import sqrt

fn rsqrt[dt: DType, width: Int](x: SIMD[dt, width]) -> SIMD[dt, width]:
    return 1 / sqrt(x)

var v = SIMD[DType.float16, 4](42)
print(rsqrt(v))
```
```
[0.154296875ã€0.154296875ã€0.154296875ã€0.154296875]
```

è¯·æ³¨æ„ï¼Œ`x`å‚æ•°å®é™…ä¸Šæ˜¯åŸºäºå‡½æ•°å‚æ•°çš„`SIMD`ç±»å‹ã€‚è¿è¡Œæ—¶ç¨‹åºå¯ä»¥ä½¿ç”¨å‚æ•°çš„å€¼ï¼Œå› ä¸ºå‚æ•°åœ¨è¿è¡Œæ—¶ç¨‹åºéœ€è¦å®ƒä»¬ä¹‹å‰åœ¨ç¼–è¯‘æ—¶å·²è§£æï¼ˆä½†æ˜¯ç¼–è¯‘æ—¶å‚æ•°è¡¨è¾¾å¼ä¸èƒ½ä½¿ç”¨è¿è¡Œæ—¶å€¼ï¼‰ã€‚

Mojoç¼–è¯‘å™¨è¿˜èƒ½å¤Ÿæ™ºèƒ½æ¨æ–­å‚æ•°çš„ç±»å‹ã€‚æ³¨æ„ï¼Œä¸Šè¿°å‡½æ•°èƒ½å¤Ÿåœ¨ä¸æŒ‡å®šå‚æ•°çš„æƒ…å†µä¸‹è°ƒç”¨å‚æ•°åŒ–çš„`sqrt[]()`å‡½æ•°-ç¼–è¯‘å™¨æ ¹æ®ä¼ é€’ç»™å®ƒçš„å‚æ•°å€¼æ¨æ–­å‡ºå‚æ•°çš„ç±»å‹ï¼Œå°±å¥½åƒæ‚¨æ˜ç¡®å†™å‡ºäº†`sqrtdt, width`ä¸€æ ·ã€‚è¿˜è¦æ³¨æ„ï¼Œ`rsqrt()`é€‰æ‹©å°†å…¶ç¬¬äºŒä¸ªå‚æ•°å‘½åä¸º`width`ï¼Œå³ä½¿`SIMD`ç±»å‹å°†å…¶å‘½åä¸º`size`ï¼Œä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚

## å¯é€‰å‚æ•°å’Œå…³é”®å­—å‚æ•°

ä¸å‡½æ•°ç­¾åä¸­å¯ä»¥æŒ‡å®šå¯é€‰å‚æ•°ä¸€æ ·ï¼Œæ‚¨è¿˜å¯ä»¥é€šè¿‡ç»™å‚æ•°è®¾ç½®é»˜è®¤å€¼æ¥å®šä¹‰ä¸€ä¸ªå¯é€‰çš„å‚æ•°ã€‚

æ‚¨è¿˜å¯ä»¥é€šè¿‡å…³é”®å­—ä¼ é€’å‚æ•°ï¼Œå°±åƒä½¿ç”¨å…³é”®å­—å‚æ•°ä¸€æ ·ã€‚å¯¹äºå¸¦æœ‰å¤šä¸ªå¯é€‰å‚æ•°çš„å‡½æ•°æˆ–ç»“æ„ï¼Œä½¿ç”¨å…³é”®å­—å…è®¸æ‚¨åªä¼ é€’è¦æŒ‡å®šçš„å‚æ•°ï¼Œè€Œä¸è€ƒè™‘å®ƒä»¬åœ¨å‡½æ•°ç­¾åä¸­çš„ä½ç½®ã€‚

ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œæ¯ä¸ªå‚æ•°éƒ½æœ‰ä¸€ä¸ªé»˜è®¤å€¼ï¼š

```mojo
fn speak[a: Int = 3, msg: StringLiteral = "woof"]():
    print(msg, a)

fn use_defaults() raises:
    speak()             # è¾“å‡º 'woof 3'
    speak[5]()          # è¾“å‡º 'woof 5'
    speak[7, "meow"]()  # è¾“å‡º 'meow 7'
    speak[msg="baaa"]() # è¾“å‡º 'baaa 3'
```

è¯·è®°ä½ï¼Œå½“è°ƒç”¨å‚æ•°åŒ–å‡½æ•°æ—¶ï¼ŒMojoå¯ä»¥æ¨æ–­å‚æ•°å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ä¸å‚æ•°å€¼ç›¸å…³è”çš„å‚æ•°å€¼ï¼ˆå‚è§ä¸Šé¢çš„`sqrt[]()`ç¤ºä¾‹ï¼‰ã€‚å¦‚æœå‚æ•°åŒ–å‡½æ•°è¿˜æœ‰å®šä¹‰é»˜è®¤å€¼ï¼Œé‚£ä¹ˆæ¨æ–­å‚æ•°ç±»å‹ä¼˜å…ˆã€‚

ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ›´æ–°å‚æ•°åŒ–çš„`speak[]()`å‡½æ•°ä»¥æ¥å—å…·æœ‰å‚æ•°åŒ–ç±»å‹çš„å‚æ•°ã€‚è™½ç„¶å‡½æ•°å¯¹äº`a`æœ‰ä¸€ä¸ªé»˜è®¤å‚æ•°å€¼ï¼Œä½†æ˜¯Mojoä¼šä½¿ç”¨`bar`å‚æ•°çš„æ¨æ–­`a`å‚æ•°å€¼ï¼ˆå¦‚æ‰€å†™çš„ï¼Œæ°¸è¿œä¸ä¼šä½¿ç”¨é»˜è®¤çš„`a`å€¼ï¼Œä½†è¿™åªæ˜¯ä¸ºäº†æ¼”ç¤ºç›®çš„ï¼‰ï¼š

```mojo
@value
struct Bar[v: Int]:
    pass

fn fooa: Int = 3, msg: StringLiteral = "woof":
    print(msg, a)

fn use_inferred():
    foo(Bar[9]())  # è¾“å‡º 'woof 9'
```

å¦‚ä¸Šæ‰€è¿°ï¼Œæ‚¨è¿˜å¯ä»¥åœ¨ç»“æ„ä¸­ä½¿ç”¨å¯é€‰å‚æ•°å’Œå…³é”®å­—å‚æ•°ï¼š

```mojo
struct KwParamStruct[greeting: String = "Hello", name: String = "ğŸ”¥mojoğŸ”¥"]:
    fn __init__(inout self):
        print(greeting, name)

fn use_kw_params():
    var a = KwParamStruct[]()                 # è¾“å‡º 'Hello ğŸ”¥mojoğŸ”¥'
    var b = KwParamStruct[name="World"]()     # è¾“å‡º 'Hello World'
    var c = KwParamStruct[greeting="Hola"]()  # è¾“å‡º 'Hola ğŸ”¥mojoğŸ”¥'
```


Mojoæ”¯æŒä½ç½®å‚æ•°å’Œå…³é”®å­—å‚æ•°ï¼Œéµå¾ªä¸ä½ç½®å‚æ•°å’Œå…³é”®å­—å‚æ•°ä¸€æ ·çš„è§„åˆ™ã€‚


## å¯å˜å‚æ•°

Mojoè¿˜æ”¯æŒå¯å˜å‚æ•°ï¼Œç±»ä¼¼äºå¯å˜å‚æ•°ï¼š

```mojo
struct MyTensor[*dimensions: Int]:
    pass
```

å¯å˜å‚æ•°æœ‰ä¸€äº›å¯å˜å‚æ•°æ²¡æœ‰çš„é™åˆ¶ï¼š

- ç›®å‰åªæ”¯æŒå¯å¯„å­˜å™¨ä¼ é€’ç±»å‹çš„å¯å˜å‚æ•°ã€‚

- å‚æ•°ä¸ä¼šè‡ªåŠ¨æŠ•å½±åˆ°`VariadicList`ä¸­ï¼Œå› æ­¤éœ€è¦æ˜¾å¼æ„é€ åˆ—è¡¨ï¼š

```mojo
fn sum_params[*values: Int]() -> Int:
    alias list = VariadicList(values)
    var sum = 0
    for v in list:
        sum += v
    return sum
```

å°šä¸æ”¯æŒå¯å˜å…³é”®å­—å‚æ•°ï¼ˆä¾‹å¦‚`**kwparams`ï¼‰ã€‚

## å‚æ•°è¡¨è¾¾å¼åªæ˜¯Mojoä»£ç 

å‚æ•°è¡¨è¾¾å¼æ˜¯åœ¨éœ€è¦å‚æ•°çš„åœ°æ–¹å‡ºç°çš„ä»»ä½•ä»£ç è¡¨è¾¾å¼ï¼ˆå¦‚`a+b`ï¼‰ã€‚å‚æ•°è¡¨è¾¾å¼æ”¯æŒè¿ç®—ç¬¦å’Œå‡½æ•°è°ƒç”¨ï¼Œå°±åƒè¿è¡Œæ—¶ä»£ç ä¸€æ ·ï¼Œæ‰€æœ‰å‚æ•°ç±»å‹éƒ½ä½¿ç”¨ä¸è¿è¡Œæ—¶ç¨‹åºç›¸åŒçš„ç±»å‹ç³»ç»Ÿï¼ˆå¦‚`Int`å’Œ`DType`ï¼‰ã€‚

ç”±äºå‚æ•°è¡¨è¾¾å¼ä½¿ç”¨ä¸è¿è¡Œæ—¶Mojoä»£ç ç›¸åŒçš„è¯­æ³•å’Œç±»å‹ï¼Œå› æ­¤æ‚¨å¯ä»¥ä½¿ç”¨è®¸å¤šâ€œä¾èµ–ç±»å‹â€åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å®šä¹‰ä¸€ä¸ªè¾…åŠ©å‡½æ•°æ¥è¿æ¥ä¸¤ä¸ªSIMDå‘é‡ï¼š

```mojo
fn concat[ty: DType, len1: Int, len2: Int](
        lhs: SIMD[ty, len1], rhs: SIMD[ty, len2]) -> SIMD[ty, len1+len2]:

    var result = SIMD[ty, len1 + len2]()
    for i in range(len1):
        result[i] = SIMDty, 1
    for j in range(len2):
        result[len1 + j] = SIMDty, 1
    return result

var a = SIMDDType.float32, 2
var x = concatDType.float32, 2, 2

print('result type:', x.element_type, 'length:', len(x))
```

è¯·æ³¨æ„ï¼Œç»“æœé•¿åº¦æ˜¯è¾“å…¥å‘é‡é•¿åº¦çš„æ€»å’Œï¼Œè¿™æ˜¯ç”¨ç®€å•çš„`+`æ“ä½œè¡¨ç¤ºçš„ã€‚

### å¼ºå¤§çš„ç¼–è¯‘æ—¶ç¼–ç¨‹

è™½ç„¶ç®€å•çš„è¡¨è¾¾å¼å¾ˆæœ‰ç”¨ï¼Œä½†æœ‰æ—¶æ‚¨å¸Œæœ›ç¼–å†™å…·æœ‰æ§åˆ¶æµçš„å‘½ä»¤å¼ç¼–è¯‘æ—¶é€»è¾‘ã€‚ç”šè‡³å¯ä»¥è¿›è¡Œç¼–è¯‘æ—¶é€’å½’ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹â€œæ ‘å½’çº¦â€ç®—æ³•ï¼Œå®ƒå°†å‘é‡çš„æ‰€æœ‰å…ƒç´ é€’å½’æ±‚å’Œä¸ºä¸€ä¸ªæ ‡é‡ï¼š

```mojo
fn slice[ty: DType, new_size: Int, size: Int](
        x: SIMD[ty, size], offset: Int) -> SIMD[ty, new_size]:
    var result = SIMD[ty, new_size]()
    for i in range(new_size):
        result[i] = SIMDty, 1
    return result

fn reduce_addty: DType, size: Int -> Int:
    @parameter
    if size == 1:
        return x[0].to_int()
    elif size == 2:
        return x[0].to_int() + x[1].to_int()

    # Extract the top/bottom halves, add them, sum the elements.
    alias half_size = size // 2
    var lhs = slicety, half_size, size
    var rhs = slicety, half_size, size
    return reduce_addty, half_size

var x = SIMDDType.index, 4
print(x)
print("Elements sum:", reduce_add(x))
```

è¿™é‡Œä½¿ç”¨äº†`@parameter`è£…é¥°å™¨æ¥åˆ›å»ºä¸€ä¸ªå‚æ•°åŒ–çš„ifæ¡ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªåœ¨ç¼–è¯‘æ—¶è¿è¡Œçš„`if`è¯­å¥ã€‚å®ƒè¦æ±‚æ¡ä»¶æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å‚æ•°è¡¨è¾¾å¼ï¼Œå¹¶ç¡®ä¿åªæœ‰ifè¯­å¥çš„æ´»åŠ¨åˆ†æ”¯è¢«ç¼–è¯‘åˆ°ç¨‹åºä¸­ã€‚

## Mojoç±»å‹åªæ˜¯å‚æ•°è¡¨è¾¾å¼

è™½ç„¶æˆ‘ä»¬å·²ç»å±•ç¤ºäº†å¦‚ä½•åœ¨ç±»å‹ä¸­ä½¿ç”¨å‚æ•°è¡¨è¾¾å¼ï¼Œä½†ç±»å‹æ³¨é‡Šæœ¬èº«å¯ä»¥æ˜¯ä»»æ„è¡¨è¾¾å¼ï¼ˆå°±åƒåœ¨Pythonä¸­ä¸€æ ·ï¼‰ã€‚Mojoä¸­çš„ç±»å‹å…·æœ‰ç‰¹æ®Šçš„å…ƒç±»å‹ç±»å‹ï¼Œå…è®¸å®šä¹‰ç±»å‹å‚æ•°åŒ–çš„ç®—æ³•å’Œå‡½æ•°ã€‚

ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç®€åŒ–çš„`Array`ï¼Œæ”¯æŒä»»æ„ç±»å‹çš„å…ƒç´ ï¼ˆé€šè¿‡`AnyRegType`å‚æ•°ï¼‰ï¼š

```mojo
struct Array[T: AnyRegType]:
    vardata: Pointer[T]
    var size: Int

    fn __init__(inout self, size: Int, value: T):
        self.size = size
        self.data = Pointer[T].alloc(self.size)
        for i in range(self.size):
            self.data[i] = value

    fn __getitem__(self, i: Int) -> T:
        return self.data[i]

    fn __del__(owned self):
        self.data.free()

var v = ArrayFloat32
print(v[0], v[1], v[2], v[3])
```

è¯·æ³¨æ„ï¼Œ`T`å‚æ•°è¢«ç”¨ä½œ`value`å‚æ•°å’Œ`__getitem__()`å‡½æ•°çš„å½¢å¼ç±»å‹å’Œè¿”å›ç±»å‹ã€‚å‚æ•°å…è®¸`Array`ç±»å‹æ ¹æ®ä¸åŒçš„ç”¨ä¾‹æä¾›ä¸åŒçš„APIã€‚

è¿˜æœ‰è®¸å¤šå…¶ä»–æƒ…å†µå¯ä»¥ä»æ›´é«˜çº§çš„å‚æ•°ä½¿ç”¨ä¸­è·ç›Šã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å¹¶è¡Œæ‰§è¡Œé—­åŒ…Næ¬¡ï¼Œä»ä¸Šä¸‹æ–‡ä¸­æä¾›ä¸€ä¸ªå€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```mojo
fn parallelizefunc: fn (Int) -> None:
    # Not actually parallel: see the 'algorithm' module for real implementation.
    for i in range(num_work_items):
        func(i)
```

å¦ä¸€ä¸ªé‡è¦çš„ä¾‹å­æ˜¯å¯å˜æ³›å‹ï¼Œå…¶ä¸­ç®—æ³•æˆ–æ•°æ®ç»“æ„å¯ä»¥åœ¨å¼‚æ„ç±»å‹åˆ—è¡¨ä¸Šå®šä¹‰ï¼Œä¾‹å¦‚å…ƒç»„ã€‚ç›®å‰ï¼Œåœ¨Mojoä¸­è¿˜æ²¡æœ‰å®Œå…¨æ”¯æŒè¿™ä¸€ç‚¹ï¼Œéœ€è¦æ‰‹åŠ¨ç¼–å†™ä¸€äº›MLIRã€‚å°†æ¥ï¼Œè¿™å°†å¯ä»¥åœ¨çº¯Mojoä¸­å®ç°ã€‚

## `alias`: å‘½åå‚æ•°è¡¨è¾¾å¼

å¾ˆå¸¸è§çš„æƒ…å†µæ˜¯æƒ³ç»™ç¼–è¯‘æ—¶çš„å€¼èµ·ä¸ªåå­—ã€‚è™½ç„¶ `var` å®šä¹‰äº†ä¸€ä¸ªè¿è¡Œæ—¶çš„å€¼ï¼Œä½†æˆ‘ä»¬éœ€è¦ä¸€ç§å®šä¹‰ç¼–è¯‘æ—¶ä¸´æ—¶å€¼çš„æ–¹æ³•ã€‚ä¸ºæ­¤ï¼ŒMojo ä½¿ç”¨äº† `alias` å£°æ˜ã€‚

ä¾‹å¦‚ï¼Œ`DType` ç»“æ„å®ç°äº†ä¸€ä¸ªç®€å•çš„æšä¸¾ï¼Œä½¿ç”¨åˆ«åæ¥å®šä¹‰æšä¸¾å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆå®é™…çš„ `DType` å®ç°ç»†èŠ‚å¯èƒ½æœ‰æ‰€ä¸åŒï¼‰ï¼š

```mojo
struct DType:
    var value : UI8
    alias invalid = DType(0)
    alias bool = DType(1)
    alias int8 = DType(2)
    alias uint8 = DType(3)
    alias int16 = DType(4)
    alias int16 = DType(5)
    ...
    alias float32 = DType(15)
```

è¿™æ ·å®¢æˆ·ç«¯å°±å¯ä»¥è‡ªç„¶åœ°ä½¿ç”¨ `DType.float32` ä½œä¸ºå‚æ•°è¡¨è¾¾å¼ï¼ˆä¹Ÿå¯ä»¥ä½œä¸ºè¿è¡Œæ—¶å€¼ï¼‰äº†ã€‚è¯·æ³¨æ„ï¼Œè¿™é‡Œæ˜¯åœ¨ç¼–è¯‘æ—¶è°ƒç”¨äº† `DType` çš„è¿è¡Œæ—¶æ„é€ å‡½æ•°ã€‚

ç±»å‹æ˜¯åˆ«åçš„å¦ä¸€ä¸ªå¸¸è§ç”¨é€”ã€‚å› ä¸ºç±»å‹æ˜¯ç¼–è¯‘æ—¶è¡¨è¾¾å¼ï¼Œæ‰€ä»¥èƒ½å¤Ÿåƒè¿™æ ·ä½¿ç”¨ï¼š

```mojo
alias Float16 = SIMD[DType.float16, 1]
alias UInt8 = SIMD[DType.uint8, 1]

var x : Float16   # Float16 ç±»ä¼¼äº "typedef"
```

ä¸ `var` å˜é‡ä¸€æ ·ï¼Œåˆ«åéµå¾ªä½œç”¨åŸŸè§„åˆ™ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨å±€éƒ¨åˆ«åï¼Œå°±åƒä½ æœŸæœ›çš„é‚£æ ·ã€‚

## å®Œå…¨ç»‘å®šã€éƒ¨åˆ†ç»‘å®šå’Œæœªç»‘å®šçš„ç±»å‹

æ‰€æœ‰å‚æ•°éƒ½æŒ‡å®šçš„å‚æ•°åŒ–ç±»å‹ç§°ä¸º _å®Œå…¨ç»‘å®š_ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒçš„æ‰€æœ‰å‚æ•°éƒ½ç»‘å®šåˆ°äº†å€¼ä¸Šã€‚æ­£å¦‚å‰é¢æ‰€æåˆ°çš„ï¼Œä½ åªèƒ½å®ä¾‹åŒ–ä¸€ä¸ªå®Œå…¨ç»‘å®šçš„ç±»å‹ï¼ˆæœ‰æ—¶ç§°ä¸º _å…·ä½“ç±»å‹_ï¼‰ã€‚

ç„¶è€Œï¼Œåœ¨æŸäº›ä¸Šä¸‹æ–‡ä¸­ï¼Œå‚æ•°åŒ–ç±»å‹å¯ä»¥æ˜¯ _æœªç»‘å®š_ æˆ– _éƒ¨åˆ†ç»‘å®š_ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨åˆ«åæ¥åˆ›å»ºä¸€ä¸ªåªéœ€è¦è¾ƒå°‘å‚æ•°çš„æ–°ç±»å‹ï¼š

```mojo
alias Bytes = SIMD[DType.uint8, _]
var b = Bytes[8]()
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`Bytes` æ˜¯ä¸€ä¸ªç±»å‹åˆ«åï¼Œè¡¨ç¤ºä¸€ä¸ªå­—èŠ‚çš„ `SIMD` å‘é‡ã€‚å‚æ•°åˆ—è¡¨ä¸­çš„ä¸‹åˆ’çº¿ `_` è¡¨ç¤ºç¬¬äºŒä¸ªå‚æ•° `width` æ˜¯æœªç»‘å®šçš„ã€‚ä½ å¯ä»¥åœ¨ä½¿ç”¨ `Bytes` æ—¶æŒ‡å®š `width` å‚æ•°ã€‚

ä¾‹å¦‚ï¼Œç»™å®šä»¥ä¸‹ç±»å‹ï¼š

```mojo
struct MyType[s: String, i: Int, i2: Int, b: Bool = True]:
    pass
```

å®ƒå¯ä»¥ä»¥ä»¥ä¸‹å½¢å¼å‡ºç°åœ¨ä»£ç ä¸­ï¼š

- _å®Œå…¨ç»‘å®š_ï¼Œæ‰€æœ‰å‚æ•°éƒ½æŒ‡å®šï¼š

  ```mojo
  MyType["Hello", 3, 4, True]
  ```

- _éƒ¨åˆ†ç»‘å®š_ï¼ŒæŒ‡å®šäº†ä¸€äº›ä½†ä¸æ˜¯æ‰€æœ‰çš„å‚æ•°ï¼š

  ```mojo
  MyType["Hola", _, _, True]
  ```

- _æœªç»‘å®š_ï¼Œæ²¡æœ‰æŒ‡å®šä»»ä½•å‚æ•°ï¼š

  ```mojo
  MyType[_, _, _, _]
  ```

ä½ è¿˜å¯ä»¥ä½¿ç”¨æ˜Ÿå·ä¸‹åˆ’çº¿è¡¨è¾¾å¼ `*_` æ¥è§£ç»‘å‚æ•°åˆ—è¡¨æœ«å°¾çš„ä»»æ„æ•°é‡çš„ä½ç½®å‚æ•°ã€‚

```mojo
# è¿™ä¸¤ä¸ªç±»å‹æ˜¯ç­‰ä»·çš„
MyType["Hello", *_]
MyType["Hello", _, _, _]
```

å½“å‚æ•°ä½¿ç”¨ `_` æˆ– `*_` è¡¨è¾¾å¼æ˜¾å¼è§£ç»‘æ—¶ï¼Œ**å¿…é¡»**ä¸ºè¯¥å‚æ•°æŒ‡å®šä¸€ä¸ªå€¼æ‰èƒ½ä½¿ç”¨è¯¥ç±»å‹ã€‚å¿½ç•¥äº†åŸå§‹ç±»å‹å£°æ˜ä¸­çš„ä»»ä½•é»˜è®¤å€¼ã€‚

éƒ¨åˆ†ç»‘å®šå’Œæœªç»‘å®šçš„å‚æ•°åŒ–ç±»å‹å¯ä»¥åœ¨æŸäº›ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ï¼Œåœ¨è¿™äº›ä¸Šä¸‹æ–‡ä¸­ï¼Œç¼ºå¤±ï¼ˆæœªç»‘å®šï¼‰çš„å‚æ•°å°†åœ¨ç¨åæä¾›ï¼Œä¾‹å¦‚åœ¨åˆ«åå’Œè‡ªåŠ¨å‚æ•°åŒ–å‡½æ•°ä¸­ã€‚

### å¿½ç•¥çš„å‚æ•°

Mojo è¿˜æ”¯æŒä¸€ç§çœç•¥å‚æ•°çš„æ ¼å¼ï¼Œå³ä»è¡¨è¾¾å¼ä¸­çœç•¥ä¸€äº›å‚æ•°ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ `_` æˆ– `*_` è¡¨è¾¾å¼ã€‚çœç•¥çš„å‚æ•°åœ¨ä¸Šä¸‹æ–‡ä¸­è¢«è§£é‡Šä¸ºæœªç»‘å®šã€‚

ä¾‹å¦‚ï¼Œç»™å®šä»¥ä¸‹ç±»å‹å£°æ˜ï¼š

```mojo
struct MyType[s: String, i: Int, i2: Int, b: Bool = True]:
    pass
```

å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å½¢å¼åˆ›å»ºä¸€ä¸ªçœç•¥äº†å‚æ•°çš„å®ä¾‹ï¼š

```mojo
MyType["Hello", _, 4, _]
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•° `s` è¢«æ˜¾å¼æŒ‡å®šä¸ºå­—ç¬¦ä¸² "Hello"ï¼Œç¬¬ä¸‰ä¸ªå‚æ•° `i2` è¢«æ˜¾å¼æŒ‡å®šä¸ºæ•´æ•° 4ï¼Œè€Œç¬¬äºŒä¸ªå‚æ•° `i` å’Œç¬¬å››ä¸ªå‚æ•° `b` è¢«çœç•¥ï¼Œå³å®ƒä»¬æ˜¯æœªç»‘å®šçš„ã€‚

çœç•¥çš„å‚æ•°å¯ä»¥åœ¨ç¨åæä¾›ï¼Œä¾‹å¦‚åœ¨åˆ«åå’Œè‡ªåŠ¨å‚æ•°åŒ–å‡½æ•°ä¸­ã€‚åœ¨è¿™äº›ä¸Šä¸‹æ–‡ä¸­ï¼Œç¼ºå¤±ï¼ˆæœªç»‘å®šï¼‰çš„å‚æ•°å°†ä½¿ç”¨æä¾›çš„å€¼æ¥è§£ç»‘ã€‚

```mojo
alias MyAlias = MyType["Hello", _, 4, _]
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`MyAlias` æ˜¯ä¸€ä¸ªåˆ«åï¼Œè¡¨ç¤ºä¸€ä¸ª `MyType` å®ä¾‹ï¼Œå…¶ä¸­ `s` è¢«ç»‘å®šä¸ºå­—ç¬¦ä¸² "Hello"ï¼Œ`i2` è¢«ç»‘å®šä¸ºæ•´æ•° 4ï¼Œè€Œ `i` å’Œ `b` æ˜¯æœªç»‘å®šçš„ã€‚

çœç•¥çš„å‚æ•°è¿˜å¯ä»¥åœ¨è‡ªåŠ¨å‚æ•°åŒ–å‡½æ•°ä¸­ä½¿ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œçœç•¥çš„å‚æ•°å¯ä»¥é€šè¿‡å‡½æ•°è°ƒç”¨æ—¶æä¾›çš„å‚æ•°æ¥è§£ç»‘ã€‚

```mojo
func createInstance(s: String, i: Int, i2: Int, b: Bool = True) -> MyType[s, i, i2, b]:
    return MyType[s, i, i2, b]
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`createInstance` æ˜¯ä¸€ä¸ªè‡ªåŠ¨å‚æ•°åŒ–å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸² `s` å’Œä¸¤ä¸ªæ•´æ•° `i` å’Œ `i2`ï¼Œå¹¶è¿”å›ä¸€ä¸ª `MyType` å®ä¾‹ï¼Œå…¶ä¸­ `s` è¢«ç»‘å®šä¸ºä¼ å…¥çš„å­—ç¬¦ä¸²ï¼Œ`i` å’Œ `i2` è¢«ç»‘å®šä¸ºä¼ å…¥çš„æ•´æ•°ï¼Œè€Œ `b` æ˜¯æœªç»‘å®šçš„ã€‚å¯ä»¥ä½¿ç”¨çœç•¥çš„å‚æ•°è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼š

```mojo
var instance = createInstance("Hello", _, 4, _)
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`instance` æ˜¯ä¸€ä¸ª `MyType` å®ä¾‹ï¼Œå…¶ä¸­ `s` è¢«ç»‘å®šä¸ºå­—ç¬¦ä¸² "Hello"ï¼Œ`i` å’Œ `i2` è¢«ç»‘å®šä¸ºä¼ å…¥çš„æ•´æ•°ï¼Œè€Œ `b` æ˜¯æœªç»‘å®šçš„ã€‚

### ä½¿ç”¨éƒ¨åˆ†ç»‘å®šç±»å‹çš„è‡ªåŠ¨å‚æ•°åŒ–

Mojoè¿˜æ”¯æŒè‡ªåŠ¨å‚æ•°åŒ–ï¼šä½¿ç”¨éƒ¨åˆ†ç»‘å®šçš„å‚æ•°åŒ–ç±»å‹ï¼ˆå³ï¼Œå…·æœ‰ä¸€äº›ä½†ä¸æ˜¯å…¨éƒ¨å‚æ•°æŒ‡å®šçš„ç±»å‹ï¼‰ã€‚

ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå…·æœ‰ä¸‰ä¸ªå‚æ•°çš„`Fudge`ç»“æ„ä½“ï¼š

```mojo
@value
struct Fudgesugar: Int, cream: Int, chocolate: Int = 7:
    fn __str__(self) -> String:
        var values = StaticIntTuple3
        return str("Fudge") + values
```

æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªæ¥å—åªæœ‰ä¸€ä¸ªç»‘å®šå‚æ•°ï¼ˆå³_éƒ¨åˆ†ç»‘å®š_ï¼‰çš„`Fudge`å‚æ•°çš„å‡½æ•°ï¼š

```mojo
fn eat(f: Fudge[5, *_]):
    print("Ate " + str(f))
```

`eat()`å‡½æ•°æ¥å—ä¸€ä¸ª`Fudge`ç»“æ„ä½“ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆ`sugar`ï¼‰ç»‘å®šåˆ°å€¼5ã€‚ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œ`cream`å’Œ`chocolate`ï¼Œåˆ™æ˜¯æœªç»‘å®šçš„ã€‚

æœªç»‘å®šçš„`cream`å’Œ`chocolate`å‚æ•°æˆä¸º`eat`å‡½æ•°çš„éšå¼è¾“å…¥å‚æ•°ã€‚å®é™…ä¸Šï¼Œè¿™å¤§è‡´ç›¸å½“äºç¼–å†™ä»¥ä¸‹ä»£ç ï¼š

```mojo
fn eatcr: Int, ch: Int:
    print("Ate " + str(f))
```

åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¼ å…¥ç»‘å®šäº†`cream`å’Œ`chocolate`å‚æ•°çš„å®ä¾‹æ¥è°ƒç”¨è¯¥å‡½æ•°ï¼š

```mojo
eat(Fudge[5, 5, 7]())
eat(Fudge[5, 8, 9]())
```

    Ate Fudge(5, 5, 7)
    Ate Fudge(5, 8, 9)
    

å¦‚æœå°è¯•ä¼ å…¥ä¸€ä¸ª`sugar`å€¼ä¸ä¸º5çš„å‚æ•°ï¼Œç¼–è¯‘å°†å¤±è´¥ï¼Œå› ä¸ºå®ƒä¸å‚æ•°ç±»å‹ä¸åŒ¹é…ï¼š

```mojo
eat(Fudge[12, 5, 7]()) 
# ERROR: invalid call to 'eat': argument #0 cannot be converted from 'Fudge[12, 5, 7]' to 'Fudge[5, 5, 7]'
```

æ‚¨è¿˜å¯ä»¥æ˜¾å¼å–æ¶ˆç»‘å®šå•ä¸ªå‚æ•°ã€‚è¿™æ ·å¯ä»¥æ›´è‡ªç”±åœ°æŒ‡å®šæœªç»‘å®šçš„å‚æ•°ã€‚

ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½å¸Œæœ›è®©ç”¨æˆ·æŒ‡å®š`sugar`å’Œ`chocolate`çš„å€¼ï¼Œè€Œè®©`cream`ä¿æŒä¸å˜ã€‚ä¸ºæ­¤ï¼Œè¯·å°†æ¯ä¸ªæœªç»‘å®šå‚æ•°å€¼æ›¿æ¢ä¸ºå•ä¸ªä¸‹åˆ’çº¿ï¼ˆ`_`ï¼‰ï¼š

```mojo
fn devour(f: Fudge[_, 6, _]):
    print(str("Devoured ") + str(f))
```

åŒæ ·ï¼Œæœªç»‘å®šçš„å‚æ•°ï¼ˆ`sugar`å’Œ`chocolate`ï¼‰å°†ä½œä¸ºéšå¼è¾“å…¥å‚æ•°æ·»åŠ åˆ°å‡½æ•°ä¸­ã€‚æ­¤ç‰ˆæœ¬ä¸ä»¥ä¸‹ä»£ç å¤§è‡´ç­‰æ•ˆï¼Œå…¶ä¸­è¿™ä¸¤ä¸ªå€¼è¢«æ˜¾å¼ç»‘å®šåˆ°è¾“å…¥å‚æ•°`su`å’Œ`ch`ï¼š

```mojo
fn devoursu: Int, ch: Int:
        print(str("Devoured ") + str(f))
```

æ‚¨è¿˜å¯ä»¥é€šè¿‡å…³é”®å­—æŒ‡å®šå‚æ•°ï¼Œæˆ–æ··åˆä½¿ç”¨ä½ç½®å‚æ•°å’Œå…³é”®å­—å‚æ•°ï¼Œå› æ­¤ä»¥ä¸‹å‡½æ•°ä¸ä¸Šä¸€ä¸ªå‡½æ•°å¤§è‡´ç­‰æ•ˆï¼šç¬¬ä¸€ä¸ªå‚æ•°`sugar`ä½¿ç”¨ä¸‹åˆ’çº¿å­—ç¬¦æ˜¾å¼å–æ¶ˆç»‘å®šã€‚ä½¿ç”¨å…³é”®å­—è¯­æ³•`chocolate=_`å–æ¶ˆç»‘å®š`chocolate`å‚æ•°ã€‚å¹¶ä¸”`cream`è¢«æ˜¾å¼ç»‘å®šåˆ°å€¼6ï¼š

```mojo
fn devour(f: Fudge[_, chocolate=_, cream=6]):
    print(str("Devoured ") + str(f))
```

`devour()`å‡½æ•°çš„è¿™ä¸‰ä¸ªç‰ˆæœ¬éƒ½å¯ä¸ä»¥ä¸‹è°ƒç”¨ä¸€èµ·ä½¿ç”¨ï¼š

```mojo
devour(Fudge[3, 6, 9]())
devour(Fudge[4, 6, 8]())
```

    Devoured Fudge(3, 6, 9)
    Devoured Fudge(4, 6, 8)
    

### æ—§ç‰ˆè¯­æ³•ï¼ˆçœç•¥å‚æ•°ï¼‰

æ‚¨è¿˜å¯ä»¥é€šè¿‡çœç•¥å‚æ•°æ¥æŒ‡å®šæœªç»‘å®šæˆ–éƒ¨åˆ†ç»‘å®šçš„ç±»å‹ï¼Œä¾‹å¦‚ï¼š

```mojo
fn nibble(f: Fudge[5]):
    print("Ate " + str(f))
```

åœ¨è¿™é‡Œï¼Œ`Fudge[5]å°±åƒ`Fudge[5, *_]`ä¸€æ ·å·¥ä½œï¼Œ**é™¤äº†**å¤„ç†å…·æœ‰é»˜è®¤å€¼çš„å‚æ•°çš„æ–¹å¼ä¸åŒã€‚ä¸ä¸¢å¼ƒ`chocolate`çš„é»˜è®¤å€¼ä¸åŒï¼Œ`Fudge[5]`ä¼šç«‹å³ç»‘å®šé»˜è®¤å€¼ï¼Œä½¿å…¶ç­‰æ•ˆäº`Fudge[5, _, 7]`ã€‚

è¿™æ„å‘³ç€ä½¿ç”¨ä¹‹å‰å®šä¹‰çš„`nibble()`å‡½æ•°çš„ä»£ç å°†æ— æ³•ç¼–è¯‘ï¼Œå› ä¸ºå®ƒä¸ä½¿ç”¨`chocolate`çš„é»˜è®¤å€¼ï¼š

```mojo
nibble(Fudge[5, 5, 9]())
# ERROR: invalid call to 'eat': argument #0 cannot be converted from 'Fudge[5, 5, 9]' to 'Fudge[5, 5, 7]'
```

TODO

å°†é€æ¸åœæ­¢æ”¯æŒçœç•¥æœªç»‘å®šå‚æ•°çš„æ–¹å¼ï¼Œè€Œå€¾å‘äºä½¿ç”¨`_`å’Œ`*_`æ˜¾å¼å–æ¶ˆç»‘å®šå‚æ•°ã€‚