# 调试
在Visual Studio Code中使用Mojo扩展可以使用VS Code内置的调试器来调试Mojo程序。（Mojo扩展还支持调试C、C++和Objective-C。）

有关VS Code调试功能的完整介绍，请参阅[Visual Studio Code调试](https://code.visualstudio.com/docs/editor/debugging)。

本页面描述了Mojo扩展提供的功能，以及Mojo调试器的当前限制。

Mojo SDK包括LLDB调试器和一个Mojo LLDB插件。它们共同为Mojo扩展提供底层调试接口。您还可以使用`mojo debug`命令在命令行中使用LLDB进行调试会话。

## 开始调试
有几种方法可以在VS Code中启动调试会话。

要开始调试，您需要一个要调试的Mojo项目。在[GitHub上的Mojo仓库](https://github.com/modularml/mojo)中有一些简单到复杂的示例。

**已熟悉VS Code？**
如果您已经熟悉在VS Code中调试，那么本节的内容大部分都是复习。您可能想直接跳到Mojo启动配置或查看使用调试器的说明，了解Mojo调试器支持的功能。

### 快速运行或调试
如果您的活动编辑器选项卡中包含一个带有`fn main()`入口点的Mojo文件，最快的运行或调试方式之一是使用编辑器工具栏中的**运行或调试**按钮。

要开始调试当前文件：
- 打开**运行或调试**下拉菜单，选择**调试Mojo文件**或**在专用终端中调试Mojo文件**。

这两个调试配置在处理输入和输出方面有所不同：
- **调试Mojo文件**会将Mojo程序与任何终端分离。程序的标准输出和标准错误输出将显示在**调试控制台**中。您无法写入程序的标准输入，但可以在单个位置查看程序的输出并与调试器进行交互。
- **在专用终端中调试Mojo文件**会创建一个新的VS Code集成终端实例，并将程序的输入和输出附加到终端。这样，您可以在终端中与程序的标准输入、标准输出和标准错误输出进行交互，而**调试控制台**仅用于与调试器进行交互。

**运行或调试**按钮使用预定义的启动配置。目前无法修改使用**运行或调试**配置启动的程序的`args`、`env`、`cwd`或其他设置。如果您需要自定义这些设置，请参阅[编辑启动配置](#编辑启动配置)。

选择调试配置后，按钮将更新为显示调试符号。单击按钮重新运行上一次的配置。

### 运行和调试视图
**运行和调试**视图包括一个启动调试会话的按钮和一个菜单以选择调试配置。还有用于显示当前变量、观察表达式、当前调用堆栈和断点的区域。

要打开**运行和调试**视图，请单击**活动栏**中的**运行和调试**图标（位于VS Code窗口的左侧）或按下<kbd>Control+Shift+D</kbd>（macOS上为<kbd>Command+Shift+D</kbd>）。

如果您还没有在当前项目中创建任何启动配置，VS Code将显示**运行开始视图**。

如果您已经启动了调试会话或创建了`launch.json`文件来定义启动配置，则会显示**启动配置**菜单，让您选择配置并启动调试会话。

### 启动调试会话的其他方式
有许多其他启动调试会话的方法。

#### 从命令面板启动如果您在活动编辑器中打开了一个Mojo文件，您也可以从**命令面板**启动调试会话。

1. 单击**查看** > **命令面板**，或按下<kbd>Control+Shift+P</kbd>（macOS上为<kbd>Command+Shift+P</kbd>）。
2. 在提示框中输入"Mojo"以显示Mojo命令。您应该会看到与[快速运行或调试](#快速运行或调试)中描述的相同的调试配置。

#### 从文件浏览器启动
要从**文件浏览器**视图中启动调试会话：

1. 在Mojo文件上右键单击。
2. 选择一个Mojo调试配置。

您应该会看到与[快速运行或调试](#快速运行或调试)中描述的相同的调试配置。

#### 使用F5调试
按下F5键使用当前调试配置启动调试会话。

如果您没有现有的调试配置可供选择，并且活动编辑器中包含一个带有`fn main()`入口点的Mojo文件，则按下F5键将使用[快速运行或调试](#快速运行或调试)中描述的**调试Mojo文件**操作来启动和调试当前文件。

## 编辑启动配置
要编辑启动配置：

1. 如果**运行和调试**视图尚未打开，请单击**活动栏**中的**运行和调试**图标（位于VS Code窗口的左侧），或按下<kbd>Control+Shift+D</kbd>（macOS上为<kbd>Command+Shift+D</kbd>）。
2. 创建或打开`launch.json`文件：
   - 如果看到**运行开始视图**，单击**创建一个launch.json文件**。
   - 如果已经设置了启动配置，请单击**启动配置**菜单旁边的齿轮图标。
3. 从调试器列表中选择**Mojo**。

VS Code会在编辑器选项卡中打开新的`launch.json`文件，并提供一些常见调试操作的模板。单击**添加配置**以添加新的配置模板。

### Mojo启动配置
Mojo调试器提供以下启动配置模板：

* 调试当前Mojo文件：在活动编辑器选项卡中启动和调试Mojo文件。与[快速运行或调试](#快速运行或调试)中描述的**调试Mojo文件**操作基本相同，但提供了更多的配置选项。
* 调试Mojo文件：与前一个条目类似，但它标识了一个Mojo文件的路径和启动参数。